<?xml version="1.0" encoding="UTF-8"?>
<d:DocumentationCore xmlns:d="http://math.spbu.ru/drl" xmlns="http://docbook.org/ns/docbook">

  <d:InfElement id="join_in_monitoring" name="Другие функции Мониторинга">
  
    <section><title id="tri_tri_4et" xreflabel="3.3.4. Монитор">3.3.4. Монитор</title>
      <section><title>Обзор</title>
        <para>Приложение Монитор позволяет вести комплексное наблюдение за состоянием различных элементов нескольких <xref linkend="АТС"/> одновременно. При наличии <xref linkend="ТАС"/> приложение может оповещать об авариях визуальной и звуковой сигнализацией. Ниже приведен список элементов находящихся под наблюдением Монитора:</para>
        <itemizedlist>
          <listitem><para>Маршрутизатор <xref linkend="РМО"/></para></listitem>
          <listitem><para>Серверы <xref linkend="РМО"/></para></listitem>
          <listitem><para>Модули станции типов: <xref linkend="БАЛ"/> и Ц<xref linkend="СЛ"/></para></listitem>
          <listitem><para>Характеристики внешних цифровых трактов станции:</para>
            <itemizedlist>
              <listitem><para>Отсутствие тракта</para></listitem>
              <listitem><para>Высокий уровень ошибок</para></listitem>
              <listitem><para>Отсутствие кадровой синхронизации</para></listitem>
              <listitem><para>Отсутствие сверхкадровой синхронизации</para></listitem>
              <listitem><para>Авария удаленного конца</para></listitem>
              <listitem><para>Отсутствие сверхцикла на дальнем конце</para></listitem>
              <listitem><para>Проскальзывание</para></listitem>
            </itemizedlist>
          </listitem>
          <listitem><para>Внешние датчики (пожарная, охранная и т.п. сигнализация)</para></listitem>
        </itemizedlist>
        <para>Приложение Монитор (см. разд. «<xref linkend="tri_tri_4et"/>») запрашивает информацию о состоянии станции у приложения Серверы (см. разд. «<xref linkend="tri_odin_dva"/>»), которое работает на компьютере непосредственно соединенном со станцией и постоянно сканирует перечисленные выше элементы станции (см. рисунок). Как правило, приложение Монитор используется в центре технической эксплуатации <xref linkend="АТС"/>, на удаленном от станции <xref linkend="РМО"/>, но не обязательно, т.е. Монитор может работать на одном компьютере с Серверами, но в этом случае управлять <xref linkend="АТС"/> может лишь одно из этих приложений (см. разд. «<xref linkend="tri_tri_5"/>»). Приложение работает одновременно со всеми имеющимися в файле <filename>osmain.ini</filename> станциями, поэтому устанавливать соединение в Панели <xref linkend="РМО"/> (см. разд. «<xref linkend="tri_odin_4etn"/>») не требуется.</para>
        <informalfigure>
          <graphic fileref="F:\runtime-New_configuration\rmo\illustrations\ScreenShots-full\MonitorSheme.jpg"/>
        </informalfigure>
        <para>Подключенное к Монитору <xref linkend="АТС"/> отображает состояние всей телефонной сети, объединяя полученную со всех станций информацию. Например, <xref linkend="ТАС"/>1 показывает «Аварию модуля» – индикатор А, а <xref linkend="ТАС"/>3 показывает «Аварию тракта» – индикатор Б, тогда на <xref linkend="ТАС"/>4 будут показаны обе аварии – активны индикаторы А и Б.</para>
      </section>
      <section><title>Главное окно</title>
        <para>Панель монитора состоит из окон:</para>
        <informalfigure>
          <graphic fileref="F:\runtime-New_configuration\rmo\illustrations\ScreenShots-full\monitor.gif"/>
        </informalfigure>
        <para><command>Окна панели монитора</command></para>
        <informaltable>
          <tgroup cols="2" align="left" colsep="1" rowsep="1">
            <colspec colnum="2" colname="c2"/>
            <tbody>
              <row>
                <entry>Текущие состояния объектов</entry>
                <entry>Содержит дерево всех объектов Вся сеть и дерево аварийных объектов Аварии</entry>
              </row>
              <row>
                <entry>Журнал состояний объектов</entry>
                <entry>Содержит историю выбранного в дереве объекта. Существует возможность выбора временного интервала для отображения истории</entry>
              </row>
            </tbody>
          </tgroup>
        </informaltable>
        <para>Окно содержит панель управления со следующими кнопками:</para>
        <itemizedlist>
          <listitem><para>Сохранить историю в файл</para></listitem>
          <listitem><para>Включить/отключить запись истории</para></listitem>
          <listitem><para>Настроить режим работы с <xref linkend="ТАС"/></para></listitem>
          <listitem><para>Настроить параметры отображения аварий на <xref linkend="ТАС"/></para></listitem>
          <listitem><para>Отбой аварии</para></listitem>
        </itemizedlist>
      </section>
      <section><title>Аварийная панель</title>
        <para>Запускается настройка аварийной панели (см. разд. «<xref linkend="tri_tri_5"/>»).</para>
      </section>
      <section><title>Отбой</title>
        <para>Отбой осуществляется нажатием пункта <emphasis>Отбой</emphasis> во всплывающем меню.</para>
        <para>Отбой применяется при наличии табло аварийной сигнализации и приводит к выключению аварийных индикаторов и включению индикатора нормального состояния.</para>
      </section>    
    </section>
    
    <section><title id="tri_tri_5" xreflabel="3.3.5. Панель аварийной сигнализации">3.3.5. Панель аварийной сигнализации</title>
      <section><title>Обзор</title>
        <para>Аварийная панель (или табло аварийной) сигнализации это периферийное устройство, предназначенное для визуальной и звуковой сигнализации аварийных ситуаций. Табло имеет несколько индикаторов, каждый из которых соответствует некоторой аварии в зависимости от заданных пользователем настроек. Существует несколько видов аварийной панели, которые имеют кроме индикаторов звуковую сирену и набор аварийных датчиков.</para>
      </section>
      <section><title>Аварии</title>
        <para>Отслеживание аварийных ситуаций выполняется приложениями Серверы (см. разд. «<xref linkend="tri_odin_dva"/>») и Монитор (см. разд. «<xref linkend="tri_tri_4"/>»), здесь приведен список сигнализаций, которые могут генерироваться при работе этих приложений:</para>
        <para><command>Список сигнализаций</command></para>
        <informaltable>
          <tgroup cols="2" align="left" colsep="1" rowsep="1">
            <colspec colnum="2" colname="c2"/>
            <tbody>
              <row>
                <entry>Авария маршрутизатора</entry>
                <entry>Пропала связь с Маршрутизатором (см. разд. «<xref linkend="tri_odin_odin"/>»)</entry>
              </row>
              <row>
                <entry>Авария серверов</entry>
                <entry>Пропала связь с Серверами (см. разд. «<xref linkend="tri_odin_dva"/>»)</entry>
              </row>
              <row>
                <entry>Авария модуля</entry>
                <entry>Пропала связь с модулем.</entry>
              </row>
              <row>
                <entry>Авария тракта</entry>
                <entry>Произошел сбой в работе тракта</entry>
              </row>
              <row>
                <entry>Авария датчика</entry>
                <entry>Сработал аварийный датчик табло</entry>
              </row>
              <row>
                <entry>Авария датчика консоли</entry>
                <entry>На консоль пришло аварийное сообщение</entry>
              </row>
              <row>
                <entry>Авария удаленной сигнализации</entry>
                <entry>Показывает состояния охранной сигнализации на различных удаленных объектах</entry>
              </row>
            </tbody>
          </tgroup>
        </informaltable>
        <para>Авария маршрутизатора и серверов проверяется только в приложении Монитор (см. разд. «<xref linkend="tri_tri_4"/>»). Сервера работают с одной станцией, тогда как Монитор сразу с несколькими, поэтому он объединяет результаты, полученные по всем станциям, например, генерируется авария модуля, если пропала связь с хотя бы одним модулем <command>какой-либо</command> станции.</para>
        <para>Сообщения об аварии модуля, тракта и датчиков содержат дополнительную информацию соответственно название модуля, номер тракта и причина сбоя, название датчика.</para>
        <para>Существует специальный вид сигнализации «Отбой аварии», которая используется для отображения нормального состояния станции. Как правило, для этой сигнализации отводиться один из индикаторов табло, хотя это не обязательное требование. Если произошла авария и загорелся аварийный индикатор, то оператор может вернуть табло в исходное состояние выполнив операцию «Отбой аварии» (см. справку по приложениям Сервера – «<xref linkend="tri_odin_dva"/>» и Монитор – «<xref linkend="tri_tri_4"/>»), тогда все индикаторы погаснут и загорится индикатор отбоя, а если индикатор отбоя не назначен, то табло погаснет полностью.</para>
      </section>
      <section><title>Настройка</title>
        <para>Настройка аварийной сигнализации выполняется с помощью редактора, который можно вызвать из приложения Серверы (см. разд. «<xref linkend="tri_odin_dva"/>») и Монитор (см. разд. «<xref linkend="tri_tri_4"/>»), выбрав соответствующий пункт меню.</para>
        <para>В редакторе в виде таблицы отображен список имеющихся аварий и их параметры, ниже приведен пример и описание параметров:</para>
        <informalfigure>
          <graphic fileref="F:\runtime-New_configuration\rmo\illustrations\ScreenShots-full\панель-станции-настройка-та.gif"/>
        </informalfigure>
        <para><command>Описание параметров аварий</command></para>
        <informaltable>
          <tgroup cols="2" align="left" colsep="1" rowsep="1">
            <colspec colnum="2" colname="c2"/>
            <thead>
              <row><entry>Параметр</entry><entry>Описание</entry></row>
            </thead>
            <tbody>
              <row>
                <entry>Сигнализация</entry>
                <entry><para>Название аварии, оно же сообщение, которое выдается в консоли Серверов (см. разд. «<xref linkend="tri_odin_4"/>»).</para>
                       <para>Название можно изменять только для датчиков</para></entry>
              </row>
              <row>
                <entry>Включено</entry>
                <entry>Значения <command>Да/Нет</command> означают состояние аварии соответственно включено/выключено. Если авария выключена, то она не отслеживается и не будет сгенерирована</entry>
              </row>
              <row>
                <entry>Индикатор</entry>
                <entry>Номер индикатора на табло, который будет загораться при возникновении аварии. Значение <command>Нет</command> означает, что индикатор не задан</entry>
              </row>
              <row>
                <entry>Звонок</entry>
                <entry>Определяет должна ли авария сопровождаться сиреной</entry>
              </row>
              <row>
                <entry>Замкнутый</entry>
                <entry>Используется только для датчиков, значение <command>Да/Нет</command> определяют тип датчика – соответственно замкнутый/разомкнутый</entry>
              </row>
            </tbody>
          </tgroup>
        </informaltable>
        <para>Параметры имеющие значение «–» не подлежат изменению и не влияют на работу аварийной панели.</para>
        <para>Реально данные настройки панели аварийной сигнализации хранятся в файле <filename>tablo.xml</filename>. Пытаться изменять этот файл вручную, а не через редактор ламп, настоятельно <command>НЕ рекомендуется</command>, за исключением одного случая – добавления информации об удаленной аварийной сигнализации. Все записи об авариях удаленной сигнализации в этом файле должны взаимно однозначно соответствовать записям об авариях удаленной сигнализации в базе данных <xref linkend="РМО"/>. Инструкция по заполнению базы данных <xref linkend="РМО"/> содержится в справке для базы данных <xref linkend="РМО"/>.</para>
        <para>Запись об удаленной аварии в <xref linkend="XML"/> файле выглядит так:</para>
        <programlisting>
        &lt;Alarm Name="AL_Advanced.2" Enabled="Да" Lamp="0" Message=""
        Modify="Нет" Category="Servers" Ring="Нет" Loop="-"/>        
        </programlisting>
        <para>Где единственным элементом, не редактируемым через редактор ламп является внутреннее имя аварии AL_Advanced.2. Первая часть имени является общим префиксом для всех аварий удаленной сигнализации. Индекс, следующий после префикса должен соответствовать идентификатору аварии в базе данных. При этом стоит обратить внимание на то, что в графе <emphasis>Сигнализация</emphasis> редактора ламп отображается не внутренее имя аварии, а строка с описанием аварии, взятая из соответствующей записи в базе данных <xref linkend="РМО"/>.</para>
        <para><emphasis>Настройка табло аварийной сигнализации</emphasis></para>
        <para>Аварийную панель можно подключать к портам COM1, COM2 и т.д., после чего, необходимо указать, к какому именно порту произведено подключение. Одновременно управлять аварийной сигнализацией может только одно приложение. Ниже приведено окно настроек, которое позволяет настроить порт, тип и управляющее приложение для табло.</para>
        <informalfigure>
          <graphic fileref="F:\runtime-New_configuration\rmo\illustrations\ScreenShots-full\панель-станции-табло-настро.gif"/>
        </informalfigure>
        <para><command>Параметры настройки</command></para>
        <informaltable>
          <tgroup cols="2" align="left" colsep="1" rowsep="1">
            <colspec colnum="2" colname="c2"/>
            <tbody>
              <row>
                <entry>Тип</entry>
                <entry>Новое или старое табло</entry>
              </row>
              <row>
                <entry>Владелец</entry>
                <entry>Приложение Сервера РМО (см. разд. «<xref linkend="tri_odin_dva"/>») или Монитор (см. разд. «<xref linkend="tri_tri_4"/>»)</entry>
              </row>
              <row>
                <entry>Порт</entry>
                <entry>Любой из COM портов (см. «COM-порт»), имеющихся в системе</entry>
              </row>
            </tbody>
          </tgroup>
        </informaltable>
      </section>  
    </section>
    
    <section><title>3.3.6. Монитор промлиний</title>
      <section><title>Обзор</title>
        <para>Монитор промлиний предназначен для наблюдения за распределением нагрузки на промлинии телефонной станции, позволяет отслеживать состояние отдельных промлиний и каналов. Также приложение предоставляет оператору возможность блокировки и разблокировки промлиний и каналов.</para>
      </section>
      <section><title>Главное окно</title>
        <para>Главное окно приложения отображает структуру телефонной станции в виде модулей соединенных трактами, показывает их текущее состояние и загруженность промлиний. Приложение может отображать одновременно структуру, содержащую не менее одного и не более четырех главных модулей. Для выбора отображаемых главных модулей используйте меню <emphasis>Вид -> Модули</emphasis>.</para>
        <informalfigure>
          <graphic fileref="F:\runtime-New_configuration\rmo\illustrations\ScreenShots-full\PromMonitor_Pich_01.gif"/>
        </informalfigure>
        <para>Состояние элементов станции определятся цветом, ниже приведено описание цветов и их значение:</para>
        <para>Состояния модулей:</para>
        <informaltable>
          <tgroup cols="2" align="left" colsep="1" rowsep="1">
            <colspec colnum="2" colname="c2"/>
            <tbody>
              <row>
                <entry>Серый</entry>
                <entry>информация о модуле еще не прочитана, это изначальное состояние.</entry>
              </row>
              <row>
                <entry>Зеленый</entry>
                <entry>модуль активен.</entry>
              </row>
              <row>
                <entry>Красный</entry>
                <entry>модуль не ответил на запрос.</entry>
              </row>
            </tbody>
          </tgroup>
        </informaltable>
        <para>Состояния трактов:</para>
        <informaltable>
          <tgroup cols="2" align="left" colsep="1" rowsep="1">
            <colspec colnum="2" colname="c2"/>
            <tbody>
              <row>
                <entry>Серый</entry>
                <entry>нет информации о тракте по одной из причин:
                  <itemizedlist>
                    <listitem><para>информация о тракте еще не прочитана, это изначальное состояние;</para></listitem>
                    <listitem><para>один из модулей, с которыми соединён тракт, не отвечает (красный);</para></listitem>
                    <listitem><para>тракт не является промлинией.</para></listitem>
                  </itemizedlist></entry>
              </row>
              <row>
                <entry>Синий, белый и красный цвета</entry>
                <entry>в процентном соотношении отображают количество занятых, свободных и заблокированных каналов соответственно.</entry>
              </row>
            </tbody>
          </tgroup>
        </informaltable>
        <para>Направление - совокупность трактов соединяющих два модуля. На схеме направления показаны в виде прямоугольников, которые соединены с соседними модулями и объединяют в себе группу трактов. Состояния направлений:</para>
        <informaltable>
          <tgroup cols="2" align="left" colsep="1" rowsep="1">
            <colspec colnum="2" colname="c2"/>
            <tbody>
              <row>
                <entry>Серый</entry>
                <entry>направление обычных трактов.</entry>
              </row>
              <row>
                <entry>Сиреневый</entry>
                <entry>направление виртуальных трактов.</entry>
              </row>
            </tbody>
          </tgroup>
        </informaltable>
        <important><para>Виртуальные тракты соединяют главный модуль (например, УКС) основной станции и главный модуль (например, УКС) или БАЛД выноса. В действительности соединение построено таким образом: [ГлавныйМодуль (например, УКС)(осн. станции)]---[ЦСЛ]---[ЦСЛ]---[ГлавныйМодуль(например, УКС)/БАЛД(вынос)], где каналы модулей ЦСЛ соединены один в один без коммутации, поэтому цепочка [ЦСЛ]---[ЦСЛ] не отображается на схеме.</para></important>
        <para>Изначально все модули и промлинии имеют серый цвет, после загрузки и анализа данных они отображают действительные состояния.</para>
        <para>Используйте окно "Локальный мониторинг" для наблюдения за отдельными трактами и каналами.</para>
      </section>
      <section><title>Локальный мониторинг</title>
        <para>Локальный мониторинг позволяет следить за состоянием и распределением нагрузки между каналами выбранных пользователем трактов.</para>
        <para>Чтобы добавить тракт в окно просмотра дважды щелкните правой кнопкой мыши на необходимый тракт в главном окне. Повторите это действие, и тракт будет удален из окна, то же самое действие можно выполнить в окне "Локального мониторинга". Двойным нажатием на модуль в главном окне пользователь может добавить сразу все тракты модуля.</para>
        <informalfigure>
          <graphic fileref="F:\runtime-New_configuration\rmo\illustrations\ScreenShots-full\PromMonitor_Pich_02.gif"/>
        </informalfigure>
        <para>Каждый канал может находиться в одном из следующих состояний:</para>
        <informaltable>
          <tgroup cols="2" align="left" colsep="1" rowsep="1">
            <colspec colnum="2" colname="c2"/>
            <tbody>
              <row>
                <entry>Серый</entry>
                <entry>нет информации о тракте по одной из причин:
                  <itemizedlist>
                    <listitem><para>информация о канале еще не прочитана, это изначальное состояние;</para></listitem>
                    <listitem><para>один из модулей, с которыми соединён тракт, не отвечает (красный), в этом случае все каналы будут серого цвета;</para></listitem>
                    <listitem><para>тракт не является промлинией, в этом случае все каналы будут серого цвета;</para></listitem>
                    <listitem><para>0 и 16 каналы являются управляющими</para></listitem>
                  </itemizedlist></entry>
              </row>
              <row>
                <entry>Белый</entry>
                <entry>канал свободен</entry>
              </row>
              <row>
                <entry>Синий</entry>
                <entry>канал занят</entry>
              </row>
              <row>
                <entry>Красный</entry>
                <entry>канал заблокирован</entry>
              </row>
            </tbody>
          </tgroup>
        </informaltable>
        <para>Используйте кнопку главного меню <command>Обновить Локально</command> для обновления содержимого окна.</para>
      </section>
      <section><title>Меню</title>
        <para><emphasis>Меню главного окна :</emphasis></para>
        <para><command>Главное меню окна «Монитор промлиний»</command></para>
        <informaltable>
          <tgroup cols="2" align="left" colsep="1" rowsep="1">
            <colspec colnum="2" colname="c2"/>
            <thead>
              <row><entry>Элемент меню/подменю</entry><entry>Описание</entry></row>
            </thead>
            <tbody>
              <row>
                <entry>Обновить -> Все модули</entry>
                <entry>обновить информацию о всех отображённых в окне «Монитор промлиний» модулях и о всех отображённых в окне «Локальный мониторинг» промлиниях.</entry>
              </row>
              <row>
                <entry>Обновить -> Активные модули</entry>
                <entry>обновить информацию о всех активных отображённых в окне «Монитор промлиний» модулях (зеленого цвета) и о всех отображённых в окне «Локальный мониторинг» промлиниях.</entry>
              </row>
              <row>
                <entry>Обновить -> Таймер -> Стоп</entry>
                <entry>остановить обновление и таймер.</entry>
              </row>
              <row>
                <entry>Обновить -> Таймер -> Непрерывно</entry>
                <entry>обновлять информацию непрерывно.</entry>
              </row>
              <row>
                <entry>Обновить -> Таймер -> 0:05</entry>
                <entry>обновлять информацию с интервалом 5 секунд.</entry>
              </row>
              <row>
                <entry>Обновить -> Таймер -> 0:10</entry>
                <entry>обновлять информацию с интервалом 10 секунд.</entry>
              </row>
              <row>
                <entry>Обновить -> Таймер -> Другое время</entry>
                <entry>обновлять информацию с интервалом указанным пользователем.</entry>
              </row>
              <row>
                <entry>Обновить -> Выход</entry>
                <entry>закрыть приложение.</entry>
              </row>
              <row>
                <entry>Вид -> Локальный мониторинг</entry>
                <entry>показать окно "Локальный мониторинг".</entry>
              </row>
              <row>
                <entry>Вид -> Автомасштабирование</entry>
                <entry>если опция включена, то каждый раз при соединении со станцией будет автоматически выполнено масштабирование окна.</entry>
              </row>
              <row>
                <entry>Вид -> Масштабировать</entry>
                <entry>установить оптимальные размеры и центрировать окно на экране.</entry>
              </row>
              <row>
                <entry>Вид -> Модули</entry>
                <entry>выбрать в окне «Модули» главные модули для отображения в окне «Монитор промлиний». Используйте эту функцию, если структура станции состоит более чем из четырех главных модулей. Главные модули определяются типом станции. Нажатие кнопки «ОК» в окне «Модули» приведёт к полному обновлению информации, отображённой в окнах «Монитор промлиний» и «Локальный мониторинг».</entry>
              </row>
              <row>
                <entry>Справка</entry>
                <entry>показать справку по приложению.</entry>
              </row>
            </tbody>
          </tgroup>
        </informaltable>
        <important><para>При обновлении по таймеру используется режим обновления, применявшийся пользователем в последний раз, иначе будут обновляться все модули. Например, чтобы непрерывно выполнять локальное обновление нажмите кнопку <command>"Обновить локально"</command> в окне "Локальный мониторинг", а затем <command>"Таймер -> Непрерывно"</command>.</para></important>
        <para><emphasis>Главное меню окна "Локальный мониторинг":</emphasis></para>
        <para><command>Главное меню окна «Локальный мониторинг»</command></para>
        <informaltable>
          <tgroup cols="2" align="left" colsep="1" rowsep="1">
            <colspec colnum="2" colname="c2"/>
            <thead>
              <row><entry>Элемент меню/подменю</entry><entry>Описание</entry></row>
            </thead>
            <tbody>
              <row>
                <entry>Обновить локально</entry>
                <entry>обновить информацию о всех отображённых в окне "Локальный мониторинг" трактах и о соответствующих трактах и модулях в окне «Монитор промлиний».</entry>
              </row>
              <row>
                <entry>Таймер</entry>
                <entry>см. соответствующий пункт описания меню главного окна</entry>
              </row>
              <row>
                <entry>Удалить всё</entry>
                <entry>удалить все тракты</entry>
              </row>
            </tbody>
          </tgroup>
        </informaltable>
        <para><emphasis>Всплывающее меню окна "Локальный мониторинг":</emphasis></para>
        <para><command>Всплывающее меню окна «Локальный мониторинг»</command></para>
        <informaltable>
          <tgroup cols="2" align="left" colsep="1" rowsep="1">
            <colspec colnum="2" colname="c2"/>
            <thead>
              <row><entry>Элемент меню/подменю</entry><entry>Описание</entry></row>
            </thead>
            <tbody>
              <row>
                <entry>Удалить</entry>
                <entry>удаляет выбранный тракт</entry>
              </row>
              <row>
                <entry>Удалить всё</entry>
                <entry>удаляет все тракты</entry>
              </row>
              <row>
                <entry>Заблокировать № канал (или все каналы)</entry>
                <entry>выполняется скрипт для блокировки/разблокировки каналов chlock.js</entry>
              </row>
              <row>
                <entry>Разблокировать № канал (или все каналы)</entry>
                <entry>выполняется скрипт для блокировки/разблокировки каналов chlock.js</entry>
              </row>
            </tbody>
          </tgroup>
        </informaltable>
        <important><para><command>Примечение:</command></para></important>
      </section>
    </section>        
  </d:InfElement>

</d:DocumentationCore>